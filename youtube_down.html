<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>YouTube ë‹¤ìš´ë¡œë”</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        .animate-spin {
            animation: spin 1s linear infinite;
        }
    </style>
</head>
<body class="min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 flex items-center justify-center p-4">
    <div class="w-full max-w-2xl">
        <div class="bg-white rounded-2xl shadow-xl p-8">
            <!-- í—¤ë” -->
            <div class="text-center mb-8">
                <div class="inline-flex items-center justify-center w-16 h-16 bg-red-500 rounded-full mb-4">
                    <svg class="w-8 h-8 text-white" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"></path>
                    </svg>
                </div>
                <h1 class="text-3xl font-bold text-gray-800 mb-2">
                    YouTube ë‹¤ìš´ë¡œë”
                </h1>
                <p class="text-gray-600">
                    ì˜ìƒ ë˜ëŠ” ìŒì›ì„ ê°„í¸í•˜ê²Œ ë‹¤ìš´ë¡œë“œí•˜ì„¸ìš”
                </p>
            </div>

            <!-- URL ì…ë ¥ -->
            <div class="mb-6">
                <label class="block text-sm font-medium text-gray-700 mb-2">
                    YouTube URL
                </label>
                <input
                    type="text"
                    id="urlInput"
                    placeholder="https://www.youtube.com/watch?v=..."
                    class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:border-red-500 transition-colors"
                />
            </div>

            <!-- ì—ëŸ¬ ë©”ì‹œì§€ -->
            <div id="errorMsg" class="mb-6 p-4 bg-red-50 border border-red-200 rounded-lg hidden">
                <div class="flex items-start gap-3">
                    <svg class="w-5 h-5 text-red-500 flex-shrink-0 mt-0.5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
                    </svg>
                    <p class="text-red-700 text-sm" id="errorText"></p>
                </div>
            </div>

            <!-- ë‹¤ìš´ë¡œë“œ ë²„íŠ¼ -->
            <div class="grid grid-cols-2 gap-4 mb-6">
                <button
                    id="videoBtn"
                    onclick="handleDownload('video')"
                    class="flex items-center justify-center gap-2 px-6 py-4 bg-red-500 text-white rounded-lg hover:bg-red-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium"
                >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"></path>
                    </svg>
                    ì˜ìƒ ë‹¤ìš´ë¡œë“œ
                </button>

                <button
                    id="audioBtn"
                    onclick="handleDownload('audio')"
                    class="flex items-center justify-center gap-2 px-6 py-4 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:bg-gray-300 disabled:cursor-not-allowed transition-colors font-medium"
                >
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19V6l12-3v13M9 19c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zm12-3c0 1.105-1.343 2-3 2s-3-.895-3-2 1.343-2 3-2 3 .895 3 2zM9 10l12-3"></path>
                    </svg>
                    ìŒì› ë‹¤ìš´ë¡œë“œ
                </button>
            </div>

            <!-- ë‹¤ìš´ë¡œë“œ ë§í¬ ê²°ê³¼ -->
            <div id="downloadLinks" class="mb-6 p-4 bg-green-50 border border-green-200 rounded-lg hidden">
                <h3 class="text-sm font-semibold text-green-800 mb-3">ë‹¤ìš´ë¡œë“œ ë§í¬</h3>
                <div id="linksList" class="space-y-2"></div>
            </div>

            <!-- ì•ˆë‚´ ì‚¬í•­ -->
            <div class="mt-8 p-4 bg-gray-50 rounded-lg">
                <h3 class="text-sm font-semibold text-gray-700 mb-2">
                    ì‚¬ìš© ë°©ë²•
                </h3>
                <ol class="text-sm text-gray-600 space-y-1 list-decimal list-inside">
                    <li>ë‹¤ìš´ë¡œë“œí•  YouTube ì˜ìƒì˜ URLì„ ë³µì‚¬í•©ë‹ˆë‹¤</li>
                    <li>ìœ„ ì…ë ¥ì°½ì— URLì„ ë¶™ì—¬ë„£ìŠµë‹ˆë‹¤</li>
                    <li>ì›í•˜ëŠ” í˜•ì‹(ì˜ìƒ/ìŒì›)ì˜ ë²„íŠ¼ì„ í´ë¦­í•©ë‹ˆë‹¤</li>
                    <li>ìƒì„±ëœ ë‹¤ìš´ë¡œë“œ ë§í¬ë¥¼ í´ë¦­í•˜ì—¬ ë‹¤ìš´ë¡œë“œí•©ë‹ˆë‹¤</li>
                </ol>
                <p class="text-xs text-gray-500 mt-3">
                    â€» ì €ì‘ê¶Œì´ ìˆëŠ” ì½˜í…ì¸ ëŠ” ê°œì¸ì ì¸ ìš©ë„ë¡œë§Œ ì‚¬ìš©í•´ì£¼ì„¸ìš”
                </p>
            </div>

            <!-- ì¶”ê°€ ì•ˆë‚´ -->
            <div class="mt-4 p-4 bg-blue-50 border border-blue-200 rounded-lg">
                <h3 class="text-sm font-semibold text-blue-800 mb-2">
                    ğŸ’¡ PCì—ì„œ ë‹¤ìš´ë¡œë“œ ë°›ëŠ” ë°©ë²•
                </h3>
                <div class="text-sm text-blue-700 space-y-2">
                    <p><strong>yt-dlp ì‚¬ìš© (ì¶”ì²œ):</strong></p>
                    <ol class="list-decimal list-inside space-y-1 ml-2">
                        <li>yt-dlp ì„¤ì¹˜: <code class="bg-white px-2 py-1 rounded">pip install yt-dlp</code></li>
                        <li>ì˜ìƒ ë‹¤ìš´ë¡œë“œ: <code class="bg-white px-2 py-1 rounded">yt-dlp [URL]</code></li>
                        <li>ìŒì› ë‹¤ìš´ë¡œë“œ: <code class="bg-white px-2 py-1 rounded">yt-dlp -x --audio-format mp3 [URL]</code></li>
                    </ol>
                    <p class="text-xs mt-2">yt-dlp ë‹¤ìš´ë¡œë“œ: <a href="https://github.com/yt-dlp/yt-dlp" target="_blank" class="underline">github.com/yt-dlp/yt-dlp</a></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        let loading = false;

        function isValidYouTubeUrl(url) {
            const patterns = [
                /^(https?:\/\/)?(www\.)?(youtube\.com\/watch\?v=|youtu\.be\/)[\w-]+/,
                /^(https?:\/\/)?(www\.)?youtube\.com\/embed\/[\w-]+/,
            ];
            return patterns.some(pattern => pattern.test(url));
        }

        function extractVideoId(url) {
            const patterns = [
                /[?&]v=([^&]+)/,
                /youtu\.be\/([^?]+)/,
                /embed\/([^?]+)/,
            ];
            
            for (const pattern of patterns) {
                const match = url.match(pattern);
                if (match) return match[1];
            }
            return null;
        }

        function showError(message) {
            const errorMsg = document.getElementById('errorMsg');
            const errorText = document.getElementById('errorText');
            errorText.textContent = message;
            errorMsg.classList.remove('hidden');
        }

        function hideError() {
            document.getElementById('errorMsg').classList.add('hidden');
        }

        function showDownloadLinks(links) {
            const downloadLinks = document.getElementById('downloadLinks');
            const linksList = document.getElementById('linksList');
            
            linksList.innerHTML = '';
            links.forEach(link => {
                const linkEl = document.createElement('a');
                linkEl.href = link.url;
                linkEl.target = '_blank';
                linkEl.className = 'block px-4 py-2 bg-white border border-green-300 rounded hover:bg-green-50 transition-colors';
                linkEl.innerHTML = `
                    <div class="flex items-center justify-between">
                        <span class="text-sm font-medium text-gray-800">${link.label}</span>
                        <svg class="w-4 h-4 text-green-600" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"></path>
                        </svg>
                    </div>
                `;
                linksList.appendChild(linkEl);
            });
            
            downloadLinks.classList.remove('hidden');
        }

        function handleDownload(type) {
            hideError();
            document.getElementById('downloadLinks').classList.add('hidden');
            
            const url = document.getElementById('urlInput').value;
            
            if (!url.trim()) {
                showError('URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (!isValidYouTubeUrl(url)) {
                showError('ì˜¬ë°”ë¥¸ YouTube URLì„ ì…ë ¥í•´ì£¼ì„¸ìš”.');
                return;
            }

            if (loading) return;
            
            loading = true;
            const videoBtn = document.getElementById('videoBtn');
            const audioBtn = document.getElementById('audioBtn');
            videoBtn.disabled = true;
            audioBtn.disabled = true;

            try {
                const videoId = extractVideoId(url);
                
                // ì—¬ëŸ¬ ë‹¤ìš´ë¡œë“œ ì„œë¹„ìŠ¤ ì˜µì…˜ ì œê³µ
                const links = [];
                
                if (type === 'video') {
                    links.push(
                        { label: '9xbuddyì—ì„œ ë‹¤ìš´ë¡œë“œ', url: `https://9xbuddy.org/process?url=${encodeURIComponent(url)}` },
                        { label: 'SaveFrom.netì—ì„œ ë‹¤ìš´ë¡œë“œ', url: `https://savefrom.net/#url=${encodeURIComponent(url)}` },
                        { label: 'YT5sì—ì„œ ë‹¤ìš´ë¡œë“œ', url: `https://yt5s.biz/enxj100/${videoId}` }
                    );
                } else {
                    links.push(
                        { label: '9xbuddyì—ì„œ MP3 ë‹¤ìš´ë¡œë“œ', url: `https://9xbuddy.org/process?url=${encodeURIComponent(url)}` },
                        { label: 'YT5sì—ì„œ MP3 ë‹¤ìš´ë¡œë“œ', url: `https://yt5s.biz/enxj100/${videoId}` },
                        { label: 'YTMP3ì—ì„œ ë‹¤ìš´ë¡œë“œ', url: `https://ytmp3.nu/e74L/${videoId}` }
                    );
                }
                
                showDownloadLinks(links);
                
                loading = false;
                videoBtn.disabled = false;
                audioBtn.disabled = false;
                
            } catch (err) {
                showError('ë‹¤ìš´ë¡œë“œ ë§í¬ ìƒì„± ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
                loading = false;
                videoBtn.disabled = false;
                audioBtn.disabled = false;
            }
        }
    </script>
</body>
</html>